<html>
<body>
    <div>
        <canvas id="myCanvas" width="1280" height="720"></canvas>
    </div>


</body>
<script>
    var canvas = document.getElementById("myCanvas");
    var context = canvas.getContext("2d");
    var width = canvas.getAttribute('width');
    var height = canvas.getAttribute('height');

    var mouseX;
    var mouseY;

    var backgroundY = 0;  


    var speed = 1;

    var buttonX = [415,350,380];
    var buttonY = [400,700,500];
    var buttonWidth = [136,204,235];
    var buttonHeight = [63,69,125];

    var frames = 30;
    var timerId = 0;
    var fadeId = 0;
    var time = 0.0;


    var Button(x, y, width, height, imgurl, fn) {
        qoq.x = x;
        this.y = y;
        this.width = width;
        this.height = height;
        this.img = new Image();
        this.img.src = imgurl;
        this.fn = fn; //pass the button's click function
    };

    Button.prototype.mouse_down = function(mouseX, mouseY) {
        var hit =
        if (hit == true)
            fn();
        return hit;
    };


    var buttons = [];

    buttons.push(new button(0,0,90,50,"new.png",function() {
        newgame();
    }));

    buttons.push(new button(90,0,90,50,"quit.png",function() {
        quit();
    }));


    function checkClick(mouseEvent) {
        var button_was_clicked = buttons.some(function(b) {
            return b.mouse_down(mouseEvent.offsetX, mouseEvent.offsetY);
        });

        if (button_was_clicked) return;

    /*bgImage.src = "images/bg.jpg";
    bgImage.onload = function(){
        myCanvas.getContext('2d').drawImage(bgImage, 0, backgroundY);
    }*/

    /*playImage.src = "Images/play.png";
    playImage.onload = function(){
        context.drawImage(playImage, buttonX[0], buttonY[0]);
    }

    quit.src = "Images/quit.jpg";
    quit.onload = function(){
        context.drawImage(quit, buttonX[1], buttonY[1]);
    }

    settingsImage.src = "Images/settings.jpg";
    settingsImage.onload = function(){
        context.drawImage(settingsImage, buttonX[2], buttonY[2]);
    }

    canvas.addEventListener("mousemove", checkPos);
    canvas.addEventListener("mouseup", checkClick);

    function update() {
        clear();
        draw();
    }
    function clear() {
        context.clearRect(0, 0, width, height);
    }

    function draw(){
        context.drawImage(playImage, buttonX[0], buttonY[0]);
        context.drawImage(quit, buttonX[1], buttonY[1]);
        context.drawImage(settingsImage, buttonX[2], buttonY[2]);         
    }

    function checkPos(mouseEvent){
        if(mouseEvent.pageX || mouseEvent.pageY == 0){
            mouseX = mouseEvent.pageX - this.offsetLeft;
            mouseY = mouseEvent.pageY - this.offsetTop;
        }else if(mouseEvent.offsetX || mouseEvent.offsetY == 0){
            mouseX = mouseEvent.offsetX;
            mouseY = mouseEvent.offsetY;
        }
    }
    

    function checkClick(mouseEvent){
        for(i = 0; i < buttonX.length; i++){
            if(mouseX > buttonX[i] && mouseX < buttonX[i] + buttonWidth[i]){
                if(mouseY > buttonY[i] && mouseY < buttonY[i] + buttonHeight[i]){
                    fadeId = setInterval("fadeOut()", 1000/frames);
                    clearInterval(timerId);
                    canvas.removeEventListener("mousemove", checkPos);
                    canvas.removeEventListener("mouseup", checkClick);
                }
            }
        }
    }
    function fadeOut(){
        context.fillStyle = "rgba(0,0,0, 0.2)";
        context.fillRect (0, 0, width, height);
        time += 0.1;
        if(time >= 2){
            clearInterval(fadeId);
            time = 0;
            timerId = setInterval("update()", 1000/frames);
            canvas.addEventListener("mousemove", checkPos);
            canvas.addEventListener("mouseup", checkClick);
        }
    }*/
    
</script>

</html>